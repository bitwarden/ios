options:
  createIntermediateGroups: true
  deploymentTarget:
    iOS: 15.0
    watchOS: 8.0
  groupSortPosition: top
  usesTabs: false
  indentWidth: 4
  tabWidth: 4
include:
  - path: Configs/local-sdk.yml
    relativePaths: false
    enable: ${LOCAL_SDK}
packages:
  BitwardenSdk:
    url: https://github.com/bitwarden/sdk-swift
    revision: f713c11db962912783dcbd881bae4f590552f8a3 # 2.0.0-4444-c0c3ee5
    branch: km/fix-cherry-pick
  Firebase:
    url: https://github.com/firebase/firebase-ios-sdk
    exactVersion: 11.14.0
  SnapshotTesting:
    url: https://github.com/pointfreeco/swift-snapshot-testing
    exactVersion: 1.18.4
  ViewInspector:
    url: https://github.com/nalexn/ViewInspector
    exactVersion: 0.10.3
targetTemplates:
  # Adds common include/excludes for app and framework targets.
  CommonTarget:
    sources:
      - path: ${sourcesPath}
        excludes:
          - "**/*Tests.*"
          - "**/.gitignore"
          - "**/Fixtures/*"
          - "**/GoogleService-Info.*.plist"
          - "**/Mocks/*"
          - "**/Sourcery/Generated/*"
          - "**/TestHelpers/*"
          - "**/Tests/*"
          - "**/__Snapshots__/*"
          - "**/sourcery.yml"
      - path: ${sourcesPath}
        includes:
          - "**/__Snapshots__/*"
          - "**/GoogleService-Info.*.plist"
        buildPhase: none
  # Adds common include/excludes for mocks targets.
  MocksTarget:
    sources:
      - path: ${sourcesPath}
        includes:
          - "**/Fixtures/*"
          - "**/Mocks/*"
  # Adds common include/excludes for snapshot test targets.
  SnapshotTestTarget:
    sources:
      - path: ${sourcesPath}
        includes:
          - "**/*SnapshotTests.*"
          - "**/TestHelpers/*"
  # Adds the Sourcery pre-build script.
  SourceryTarget:
    sources:
      - path: ${sourcesPath}/Sourcery/sourcery.yml
        buildPhase: none
    preBuildScripts:
      - name: Sourcery
        script: |
          if [[ ! "$PATH" =~ "/opt/homebrew/bin" ]]; then
            PATH="/opt/homebrew/bin:$PATH"
          fi
          mint run sourcery --config ${sourcesPath}/Sourcery/sourcery.yml
        basedOnDependencyAnalysis: false
        outputFiles:
          - $(SRCROOT)/${sourcesPath}/Sourcery/Generated/AutoMockable.generated.swift
  # Adds common include/excludes for test targets.
  TestTarget:
    sources:
      - path: ${sourcesPath}
        excludes:
          - "**/*SnapshotTests.*"
          - "**/*ViewInspectorTests.*"
        includes:
          - "**/*Tests.*"
          - "**/TestHelpers/*"
  # Adds common include/excludes for ViewInspector test targets.
  ViewInspectorTestTarget:
    sources:
      - path: ${sourcesPath}
        includes:
          - "**/*ViewInspectorTests.*"
          - "**/TestHelpers/*"
